<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fraud Detection System (Standalone Demo)</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-color: #f4f7fa;
      --sidebar-bg: #111827;
      --card-bg: #ffffff;
      --text-primary: #1f2937;
      --text-secondary: #6b7280;
      --accent-color: #3b82f6;
      --accent-hover: #2563eb;
      --border-color: #e5e7eb;
      --success-color: #10b981;
      --danger-color: #ef4444;
      --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-primary);
      display: flex;
      height: 100vh;
      overflow: hidden;
    }
    .sidebar {
      width: 260px;
      background-color: var(--sidebar-bg);
      color: #fff;
      padding: 24px;
      display: flex;
      flex-direction: column;
    }
    .sidebar-header {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 1.5rem;
      font-weight: 700;
      margin-bottom: 40px;
    }
    .sidebar-nav a {
      display: flex;
      align-items: center;
      gap: 12px;
      color: var(--text-secondary);
      text-decoration: none;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 8px;
      font-weight: 500;
      transition: all 0.2s ease;
    }
    .sidebar-nav a:hover {
      background-color: rgba(255, 255, 255, 0.1);
      color: #fff;
    }
    .sidebar-nav a.active {
      background-color: var(--accent-color);
      color: #fff;
    }
    .sidebar-nav a .fa-fw { width: 20px; text-align: center; }
    .main-content {
      flex: 1;
      padding: 24px 32px;
      overflow-y: auto;
    }
    .page { display: none; }
    .page.active { display: block; }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }
    .header h1 { font-size: 1.8rem; }
    .status-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      color: var(--success-color);
    }
    .status-indicator .status-dot {
      width: 10px;
      height: 10px;
      background-color: var(--success-color);
      border-radius: 50%;
      animation: pulse 1.5s infinite ease-in-out;
    }
    @keyframes pulse {
      0% { transform: scale(0.8); opacity: 0.7; }
      50% { transform: scale(1); opacity: 1; }
      100% { transform: scale(0.8); opacity: 0.7; }
    }
    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 24px;
      margin-bottom: 32px;
    }
    .kpi-card {
      background-color: var(--card-bg);
      padding: 24px;
      border-radius: 12px;
      box-shadow: var(--shadow);
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .kpi-card .icon {
      font-size: 1.8rem;
      padding: 16px;
      border-radius: 50%;
      color: #fff;
    }
    .kpi-card .kpi-value { font-size: 2rem; font-weight: 700; }
    .kpi-card .kpi-title { font-size: 0.9rem; color: var(--text-secondary); font-weight: 500; }
    .content-grid {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 24px;
    }
    .content-card {
      background-color: var(--card-bg);
      padding: 24px;
      border-radius: 12px;
      box-shadow: var(--shadow);
    }
    .content-card h3 { margin-bottom: 16px; }
    .data-table { width: 100%; border-collapse: collapse; }
    .data-table th, .data-table td {
      padding: 12px 16px;
      text-align: left;
      border-bottom: 1px solid var(--border-color);
      font-size: 0.9rem;
    }
    .data-table th { font-weight: 600; color: var(--text-secondary); }
    .data-table tbody tr:last-child td { border-bottom: none; }
    .data-table tbody tr:hover { background-color: #f9fafb; }
    .data-table .new-row { animation: fadeIn 0.5s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    .status-tag {
      padding: 4px 10px;
      border-radius: 16px;
      font-weight: 600;
      font-size: 0.8rem;
    }
    .status-high { background-color: #fee2e2; color: #b91c1c; }
    .status-low { background-color: #d1fae5; color: #047857; }
    .alerts-list .alert-item {
      display: flex;
      gap: 12px;
      padding: 12px 0;
      border-bottom: 1px solid var(--border-color);
    }
    .alerts-list .alert-item:last-child { border-bottom: none; }
    .alert-item .icon { font-size: 1.2rem; color: var(--danger-color); margin-top: 2px; }
    .alert-item b { display: block; }
    .alert-item small { color: var(--text-secondary); }
    .toolbar {
      display: flex;
      justify-content: flex-end;
      margin-bottom: 16px;
    }
    .search-bar {
      padding: 8px 12px;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      width: 300px;
    }
    .alerts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
    }
    .alert-card {
      background-color: #fffbeb;
      border-left: 5px solid var(--danger-color);
      padding: 16px;
      border-radius: 8px;
      box-shadow: var(--shadow);
    }
    .alert-card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
    .alert-card-header b { font-size: 1.1rem; }
    .alert-card p { margin: 4px 0; font-size: 0.9rem; color: var(--text-secondary); }
    .alert-card p span { color: var(--text-primary); font-weight: 500; }
  </style>
</head>
<body>

<aside class="sidebar">
  <div class="sidebar-header">
    <i class="fa-solid fa-shield-halved"></i>
    <span>FraudSys</span>
  </div>
  <nav class="sidebar-nav">
    <a href="#" class="nav-link active" data-target="dashboard"><i class="fa-solid fa-fw fa-chart-pie"></i> Dashboard</a>
    <a href="#" class="nav-link" data-target="transactions"><i class="fa-solid fa-fw fa-receipt"></i> Transactions</a>
    <a href="#" class="nav-link" data-target="alerts"><i class="fa-solid fa-fw fa-triangle-exclamation"></i> Suspicious Alerts</a>
    <a href="#" class="nav-link" data-target="reports"><i class="fa-solid fa-fw fa-chart-line"></i> Reports</a>
    <a href="#" class="nav-link" data-target="settings"><i class="fa-solid fa-fw fa-gear"></i> Settings</a>
  </nav>
</aside>

<div class="main-content">

  <main id="dashboard" class="page active">
    <header class="header">
      <h1>Dashboard Overview</h1>
      <div class="status-indicator">
        <div class="status-dot"></div>
        <span>System Active</span>
      </div>
    </header>
    <div class="kpi-grid">
      <div class="kpi-card">
        <div class="icon" style="background-color: #3b82f6;"><i class="fa-solid fa-receipt"></i></div>
        <div>
          <div class="kpi-value" id="totalTransactions">0</div>
          <div class="kpi-title">Total Transactions</div>
        </div>
      </div>
      <div class="kpi-card">
        <div class="icon" style="background-color: #ef4444;"><i class="fa-solid fa-shield-virus"></i></div>
        <div>
          <div class="kpi-value" id="suspiciousTransactions">0</div>
          <div class="kpi-title">Suspicious Transactions</div>
        </div>
      </div>
      <div class="kpi-card">
        <div class="icon" style="background-color: #10b981;"><i class="fa-solid fa-crosshairs"></i></div>
        <div>
          <div class="kpi-value" id="accuracy">0%</div>
          <div class="kpi-title">Detection Accuracy</div>
        </div>
      </div>
      <div class="kpi-card">
        <div class="icon" style="background-color: #f97316;"><i class="fa-solid fa-bullseye"></i></div>
        <div>
          <div class="kpi-value" id="falsePositive">0%</div>
          <div class="kpi-title">False Positive Rate</div>
        </div>
      </div>
    </div>
    <div class="content-grid">
      <div class="content-card">
        <h3>ðŸ”„ Recent Transactions</h3>
        <table class="data-table">
          <thead><tr><th>Time</th><th>Customer</th><th>Amount</th><th>Status</th></tr></thead>
          <tbody id="recentTransactionsBody"></tbody>
        </table>
      </div>
      <div class="content-card">
        <h3>ðŸš¨ Recent Alerts</h3>
        <div class="alerts-list" id="recentAlertsContainer"></div>
      </div>
    </div>
  </main>

  <main id="transactions" class="page">
    <header class="header"><h1>All Transactions</h1></header>
    <div class="content-card">
      <div class="toolbar">
        <input type="text" id="transactionSearch" class="search-bar" placeholder="Search transactions...">
      </div>
      <table class="data-table">
        <thead><tr><th>Time</th><th>Customer ID</th><th>Amount</th><th>Merchant</th><th>City</th><th>Risk</th></tr></thead>
        <tbody id="allTransactionsBody"></tbody>
      </table>
    </div>
  </main>

  <main id="alerts" class="page">
    <header class="header"><h1>Suspicious Transaction Alerts</h1></header>
    <div class="alerts-grid" id="allAlertsContainer"></div>
  </main>

  <main id="reports" class="page">
    <header class="header"><h1>Reports</h1></header>
    <div class="content-card">
      <p>Reporting features are under development.</p>
    </div>
  </main>

  <main id="settings" class="page">
    <header class="header"><h1>Settings</h1></header>
    <div class="content-card">
      <p>System settings will be available here.</p>
    </div>
  </main>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const navLinks = document.querySelectorAll('.nav-link');
    const pages = document.querySelectorAll('.page');
    let activePage = 'dashboard';
    let transactionCounter = 500;

    // --- MOCK DATA GENERATION ---
    const merchants = ["Amazon", "Target", "Shell", "McDonalds", "Walmart", "Starbucks"];
    const cities = ["New York", "Los Angeles", "Chicago", "Houston", "Miami", "Mumbai", "Delhi"];

    const generateMockTransaction = () => {
      transactionCounter++;
      const isFraud = Math.random() < 0.1; // 10% chance of fraud
      return {
        id: transactionCounter,
        timestamp: new Date().toISOString(),
        customer_id: `CUST${Math.floor(1000 + Math.random() * 9000)}`,
        amount: parseFloat((Math.random() * 500 + 5).toFixed(2)),
        merchant_category: merchants[Math.floor(Math.random() * merchants.length)],
        city: cities[Math.floor(Math.random() * cities.length)],
        is_fraud: isFraud ? 1 : 0
      };
    };

    let mockTransactions = Array.from({ length: 50 }, generateMockTransaction).sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
    let mockAlerts = mockTransactions.filter(t => t.is_fraud === 1);

    let mockMetrics = {
      total: mockTransactions.length + 450, // Start with a higher base
      flagged: mockAlerts.length + 45,
      accuracy: 94.7,
      false_positive_rate: 2.3
    };

    // --- NAVIGATION LOGIC ---
    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const target = link.getAttribute('data-target');

        navLinks.forEach(nav => nav.classList.remove('active'));
        link.classList.add('active');

        pages.forEach(page => {
          page.classList.remove('active');
          if (page.id === target) {
            page.classList.add('active');
            activePage = target;
          }
        });
        loadDataForActivePage();
      });
    });

    // --- DATA LOADING LOGIC ---
    const loadDataForActivePage = () => {
      switch(activePage) {
        case 'dashboard':
          loadMetrics();
          loadRecentTransactions();
          loadRecentAlerts();
          break;
        case 'transactions':
          loadAllTransactions();
          break;
        case 'alerts':
          loadAllAlerts();
          break;
      }
    };

    function loadMetrics() {
      document.getElementById("totalTransactions").innerText = mockMetrics.total;
      document.getElementById("suspiciousTransactions").innerText = mockMetrics.flagged;
      document.getElementById("accuracy").innerText = mockMetrics.accuracy + "%";
      document.getElementById("falsePositive").innerText = mockMetrics.false_positive_rate + "%";
    }

    function loadRecentTransactions() {
      const txns = mockTransactions.slice(0, 10);
      const txBody = document.getElementById("recentTransactionsBody");
      const rows = txns.map(t => `
            <tr class="new-row">
                <td>${new Date(t.timestamp).toLocaleTimeString()}</td>
                <td>${t.customer_id}</td>
                <td>â‚¹${t.amount.toFixed(2)}</td>
                <td><span class="status-tag ${t.is_fraud ? 'status-high' : 'status-low'}">${t.is_fraud ? 'High Risk' : 'Normal'}</span></td>
            </tr>`).join("");
      txBody.innerHTML = rows;
    }

    function loadRecentAlerts() {
      const alerts = mockAlerts.slice(0, 5);
      const alertsDiv = document.getElementById("recentAlertsContainer");
      const items = alerts.map(a => `
            <div class="alert-item new-row">
                <i class="fa-solid fa-fw fa-circle-exclamation icon"></i>
                <div>
                    <b>â‚¹${a.amount.toFixed(2)} at ${a.merchant_category}</b>
                    <small>${new Date(a.timestamp).toLocaleString()}</small>
                </div>
            </div>`).join("");
      alertsDiv.innerHTML = items;
    }

    function loadAllTransactions() {
      const txns = mockTransactions;
      const txBody = document.getElementById("allTransactionsBody");
      const rows = txns.map(t => `
            <tr>
                <td>${new Date(t.timestamp).toLocaleString()}</td>
                <td>${t.customer_id}</td>
                <td>â‚¹${t.amount.toFixed(2)}</td>
                <td>${t.merchant_category}</td>
                <td>${t.city}</td>
                <td><span class="status-tag ${t.is_fraud ? 'status-high' : 'status-low'}">${t.is_fraud ? 'High Risk' : 'Normal'}</span></td>
            </tr>`).join("");
      txBody.innerHTML = rows;
    }

    function loadAllAlerts() {
      const alerts = mockAlerts;
      const alertsContainer = document.getElementById("allAlertsContainer");
      const cards = alerts.map(a => `
            <div class="alert-card new-row">
                <div class="alert-card-header">
                    <b>â‚¹${a.amount.toFixed(2)} Flagged</b>
                    <small>${new Date(a.timestamp).toLocaleTimeString()}</small>
                </div>
                <p>Customer: <span>${a.customer_id}</span></p>
                <p>Merchant: <span>${a.merchant_category}</span></p>
                <p>Location: <span>${a.city}</span></p>
            </div>`).join("");
      alertsContainer.innerHTML = cards;
    }

    // --- SIMULATE LIVE DATA ---
    const simulateNewData = () => {
      if (Math.random() < 0.5) { // 50% chance to add new data every interval
        const newTx = generateMockTransaction();
        mockTransactions.unshift(newTx);
        if (mockTransactions.length > 50) mockTransactions.pop();

        mockMetrics.total++;

        if (newTx.is_fraud) {
          mockAlerts.unshift(newTx);
          if (mockAlerts.length > 20) mockAlerts.pop();
          mockMetrics.flagged++;
        }
      }
    };

    // --- INTERACTIVITY ---
    document.getElementById('transactionSearch').addEventListener('keyup', (e) => {
      const searchTerm = e.target.value.toLowerCase();
      const rows = document.querySelectorAll('#allTransactionsBody tr');
      rows.forEach(row => {
        const rowText = row.innerText.toLowerCase();
        row.style.display = rowText.includes(searchTerm) ? '' : 'none';
      });
    });

    // Initial load and interval refresh
    loadDataForActivePage();
    setInterval(() => {
      simulateNewData();
      loadDataForActivePage();
    }, 5000);
  });
</script>
</body>
</html>
